{"version":3,"sources":["js/main.js"],"names":["headerButton","document","getElementById","callbackButton","querySelectorAll","modalContainer","querySelector","modalCloseButton","mainForm","mainName","mainTel","mainTextArea","modalForm","form","name","tel","textArea","siteMap","toggleButton","siteMapList","siteMapListLabel","footerAdress","documentElement","clientWidth","textContent","onToggleButtonClick","checked","style","addEventListener","isStorageSupport","isStorageEmail","storage","telStorage","onModalOpen","evt","preventDefault","classList","contains","remove","value","emailStorage","focus","console","log","localStorage","getItem","err","i","length","add","window","keyCode","submitForm","setItem","target"],"mappings":"AAAA,IAAAA,aAAAC,SAAAC,eAAA,iBACAC,eAAAF,SAAAG,iBAAA,iBACAC,eAAAJ,SAAAK,cAAA,eACAC,iBAAAN,SAAAK,cAAA,6BAEAE,SAAAP,SAAAK,cAAA,cAAAA,cAAA,QACAG,SAAAD,SAAAF,cAAA,eACAI,QAAAF,SAAAF,cAAA,cACAK,aAAAH,SAAAF,cAAA,kBAEAM,UAAAX,SAAAK,cAAA,eACAO,KAAAD,UAAAN,cAAA,QACAQ,KAAAD,KAAAP,cAAA,eACAS,IAAAF,KAAAP,cAAA,cACAU,SAAAH,KAAAP,cAAA,kBAGAW,QAAA,CACAC,aAAAjB,SAAAC,eAAA,iBACAiB,YAAAlB,SAAAK,cAAA,mBACAc,iBAAAnB,SAAAK,cAAA,0BAGAe,aAAA,CACAH,aAAAjB,SAAAC,eAAA,iBACAiB,YAAAlB,SAAAK,cAAA,+BACAc,iBAAAnB,SAAAK,cAAA,yBAGAN,cAAAC,SAAAqB,gBAAAC,YAAA,MACAvB,aAAAwB,YAAA,2BAGA,IAAAC,oBAAA,SAAAP,EAAAC,EAAAC,GACAF,EAAAQ,SACAP,EAAAQ,MAAA,iBACAP,EAAAO,MAAA,kCAEAR,EAAAQ,MAAA,gBACAP,EAAAO,MAAA,iBAIAV,QAAAC,aAAAU,iBAAA,SAAA,WACAH,oBAAAR,QAAAC,aAAAD,QAAAE,YAAAF,QAAAG,oBAGAC,aAAAH,aAAAU,iBAAA,SAAA,WACAH,oBAAAJ,aAAAH,aAAAG,aAAAF,YAAAE,aAAAD,oBAGA,IAAAS,kBAAA,EACAC,gBAAA,EACAC,QAAA,GACAC,WAAA,GAEAC,YAAA,SAAAC,GACAA,EAAAC,iBACAvB,UAAAwB,UAAAC,SAAA,wBACAzB,UAAAwB,UAAAE,OAAA,sBAEAP,SAAAC,YACAlB,KAAAyB,MAAAR,QACAhB,IAAAwB,MAAAC,aACAxB,SAAAyB,SACAV,SACAjB,KAAAyB,MAAAR,QACAW,QAAAC,IAAA7B,MACAC,IAAA0B,SAEA3B,KAAA2B,UAKA,IACAV,QAAAa,aAAAC,QAAA,QACA,MAAAC,GACAjB,kBAAA,EAGA,IACAW,aAAAI,aAAAC,QAAA,OACA,MAAAC,GACAhB,gBAAA,EAGA,IAAA,IAAAiB,EAAA,EAAAA,EAAA5C,eAAA6C,OAAAD,IACA5C,eAAA4C,GAAAnB,iBAAA,QAAAK,aAGA1B,iBAAAqB,iBAAA,QAAA,SAAAM,GACAA,EAAAC,iBACAvB,UAAAwB,UAAAa,IAAA,wBAGAC,OAAAtB,iBAAA,UAAA,SAAAM,GACA,KAAAA,EAAAiB,UACAvC,UAAAwB,UAAAC,SAAA,wBACAH,EAAAC,iBACAvB,UAAAwB,UAAAa,IAAA,0BAKA,IAAAG,WAAA,SAAAvC,EAAAC,EAAAC,GACAF,EAAAe,iBAAA,SAAA,SAAAM,GACApB,EAAAyB,OAAAxB,EAAAwB,MAIAV,kBAAAC,iBACAc,aAAAS,QAAA,OAAAvC,EAAAyB,OACAK,aAAAS,QAAA,MAAAtC,EAAAwB,SALAL,EAAAC,iBACAO,QAAAC,IAAA,kCAUAS,WAAAvC,KAAAC,KAAAC,KACAqC,WAAA5C,SAAAC,SAAAC,SAEAE,UAAAgB,iBAAA,QAAA,SAAAM,GACAA,EAAAoB,OAAAlB,UAAAC,SAAA,eAIAK,QAAAC,IAAA,GACAT,EAAAC,iBACAvB,UAAAwB,UAAAa,IAAA,uBALAP,QAAAC,IAAA","file":"main.min.js","sourcesContent":["var headerButton = document.getElementById('header-button');\nvar callbackButton = document.querySelectorAll('.modal-button');\nvar modalContainer = document.querySelector('.modal-form');\nvar modalCloseButton = document.querySelector('.modal-form__close-button');\n\nvar mainForm = document.querySelector('.main-form').querySelector('form');\nvar mainName = mainForm.querySelector('[name=name]');\nvar mainTel = mainForm.querySelector('[name=tel]');\nvar mainTextArea = mainForm.querySelector('[name=comment]');\n\nvar modalForm = document.querySelector('.modal-form');\nvar form = modalForm.querySelector('form');\nvar name = form.querySelector('[name=name]');\nvar tel = form.querySelector('[name=tel]');\nvar textArea = form.querySelector('[name=comment]');\n\n\nvar siteMap = {\n  toggleButton: document.getElementById('footer-toggle'),\n  siteMapList: document.querySelector('.site-map__list'),\n  siteMapListLabel: document.querySelector('.footer__toggle-label'),\n}\n\nvar footerAdress = {\n  toggleButton: document.getElementById('adress-toggle'),\n  siteMapList: document.querySelector('.footer__adress-description'),\n  siteMapListLabel: document.querySelector('.adress-toggle-label'),\n}\n\nif(headerButton && document.documentElement.clientWidth < 768) {\n  headerButton.textContent = \"бесплатная консультация\";\n};\n\nvar onToggleButtonClick = function(toggleButton, siteMapList, siteMapListLabel) {\n  if (toggleButton.checked) {\n    siteMapList.style = 'display: block';\n    siteMapListLabel.style = 'height: 2px; overflow: hidden'\n  } else {\n    siteMapList.style = 'display: none';\n    siteMapListLabel.style = 'height: 17px'\n  }\n}\n\nsiteMap.toggleButton.addEventListener('change', function() {\n  onToggleButtonClick(siteMap.toggleButton, siteMap.siteMapList, siteMap.siteMapListLabel)\n});\n\nfooterAdress.toggleButton.addEventListener('change', function() {\n  onToggleButtonClick(footerAdress.toggleButton, footerAdress.siteMapList, footerAdress.siteMapListLabel)\n});\n\nvar isStorageSupport = true;\nvar isStorageEmail = true;\nvar storage = \"\";\nvar telStorage = \"\";\n\nvar onModalOpen = function (evt) {\n  evt.preventDefault();\n  if (modalForm.classList.contains(\"modal-form--closed\")){\n    modalForm.classList.remove(\"modal-form--closed\");\n\n    if (storage && telStorage) {\n      name.value = storage;\n      tel.value = emailStorage;\n      textArea.focus();\n    } else if(storage) {\n      name.value = storage;\n      console.log(name);\n      tel.focus();\n    } else {\n      name.focus();\n    }\n  }\n};\n\ntry {\n  storage = localStorage.getItem(\"name\");\n} catch (err) {\n  isStorageSupport = false;\n}\n\ntry {\n  emailStorage = localStorage.getItem(\"tel\");\n} catch (err) {\n  isStorageEmail = false;\n}\n\nfor (var i = 0; i < callbackButton.length; i++) {\n  callbackButton[i].addEventListener(\"click\", onModalOpen);\n}\n\nmodalCloseButton.addEventListener('click', function(evt) {\n  evt.preventDefault();\n  modalForm.classList.add(\"modal-form--closed\");\n})\n\nwindow.addEventListener(\"keydown\", function(evt) {\n  if (evt.keyCode === 27) {\n    if (!modalForm.classList.contains(\"modal-form--closed\")) {\n      evt.preventDefault();\n      modalForm.classList.add(\"modal-form--closed\");\n    }\n  }\n});\n\nvar submitForm = function(form, name, tel) {\n  form.addEventListener('submit', function(evt) {\n    if (!name.value || !tel.value) {\n      evt.preventDefault();\n      console.log(\"Нужно ввести имя и телефон\");\n    } else {\n      if(isStorageSupport && isStorageEmail) {\n        localStorage.setItem(\"name\", name.value);\n        localStorage.setItem(\"tel\", tel.value);\n      }\n    }\n  })\n}\n\nsubmitForm(form, name, tel);\nsubmitForm(mainForm, mainName, mainTel);\n\nmodalForm.addEventListener(\"click\", function(evt) {\n  if (!evt.target.classList.contains(\"modal-form\")) {\n    console.log(1);\n    return;\n  }\n  console.log(2);\n  evt.preventDefault();\n  modalForm.classList.add(\"modal-form--closed\");\n});\n"]}