{"version":3,"sources":["js/main.js"],"names":["headerButton","document","getElementById","callbackButton","querySelector","modalContainer","modalCloseButton","mainForm","mainName","mainTel","mainTextArea","modalForm","form","nameFooter","tel","textArea","footerRollBar","querySelectorAll","footer","footerToggleButton","footerFeedback","documentElement","clientWidth","textContent","addEventListener","evt","preventDefault","scrollIntoView","behavior","block","inline","forEach","it","bar","classList","contains","remove","add","isStorageSupport","isStorageEmail","storage","telStorage","onModalOpen","value","emailStorage","focus","console","log","name","localStorage","getItem","err","window","keyCode","submitForm","setItem","target"],"mappings":"AAAA,IAAAA,aAAAC,SAAAC,eAAA,iBACAC,eAAAF,SAAAG,cAAA,iBACAC,eAAAJ,SAAAG,cAAA,eACAE,iBAAAL,SAAAG,cAAA,6BAEAG,SAAAN,SAAAG,cAAA,cACAI,SAAAP,SAAAC,eAAA,kBACAO,QAAAF,SAAAH,cAAA,cACAM,aAAAH,SAAAH,cAAA,kBAEAO,UAAAV,SAAAG,cAAA,eACAQ,KAAAD,UAAAP,cAAA,QACAS,WAAAD,KAAAR,cAAA,qBACAU,IAAAF,KAAAR,cAAA,cACAW,SAAAH,KAAAR,cAAA,kBAEAY,cAAAf,SAAAgB,iBAAA,aACAC,OAAAjB,SAAAG,cAAA,oBACAe,mBAAAlB,SAAAgB,iBAAA,mBAEAG,eAAAnB,SAAAG,cAAA,aAEAJ,cAAAC,SAAAoB,gBAAAC,YAAA,MACAtB,aAAAuB,YAAA,2BAGAvB,aAAAwB,iBAAA,QAAA,SAAAC,GACAA,EAAAC,iBACAN,eAAAO,eAAA,CAAAC,SAAA,SAAAC,MAAA,SAAAC,OAAA,aAGAX,mBAAAY,QAAA,SAAAC,GACAA,EAAAR,iBAAA,SAAA,SAAAC,GACAA,EAAAC,iBACAV,cAAAe,QAAA,SAAAE,GACAA,EAAAC,UAAAC,SAAA,kBACAF,EAAAC,UAAAE,OAAA,kBAGAH,EAAAC,UAAAG,IAAA,wBAoDA,IAAAC,kBAAA,EACAC,gBAAA,EACAC,QAAA,GACAC,WAAA,GAEAC,YAAA,SAAAjB,GACAA,EAAAC,iBACAf,UAAAuB,UAAAC,SAAA,wBACAxB,UAAAuB,UAAAE,OAAA,sBAEAI,SAAAC,YACA5B,WAAA8B,MAAAH,QACA1B,IAAA6B,MAAAC,aACA7B,SAAA8B,SACAL,SACA3B,WAAA8B,MAAAH,QACAM,QAAAC,IAAAC,MACAlC,IAAA+B,SAEAhC,WAAAgC,UAKA,IACAL,QAAAS,aAAAC,QAAA,QACA,MAAAC,GACAb,kBAAA,EAGA,IACAM,aAAAK,aAAAC,QAAA,OACA,MAAAC,GACAZ,gBAAA,EAGApC,eAAAqB,iBAAA,QAAAkB,aAEApC,iBAAAkB,iBAAA,QAAA,SAAAC,GACAA,EAAAC,iBACAf,UAAAuB,UAAAG,IAAA,wBAGAe,OAAA5B,iBAAA,UAAA,SAAAC,GACA,KAAAA,EAAA4B,UACA1C,UAAAuB,UAAAC,SAAA,wBACAV,EAAAC,iBACAf,UAAAuB,UAAAG,IAAA,0BAKA,IAAAiB,WAAA,SAAA1C,EAAAoC,EAAAlC,GACAF,EAAAY,iBAAA,SAAA,SAAAC,GACAuB,EAAAL,OAAA7B,EAAA6B,MAIAL,kBAAAC,iBACAU,aAAAM,QAAA,OAAAP,EAAAL,OACAM,aAAAM,QAAA,MAAAzC,EAAA6B,SALAlB,EAAAC,iBACAoB,QAAAC,IAAA,kCAUAO,WAAA1C,KAAAoC,KAAAlC,KACAwC,WAAA/C,SAAAC,SAAAC,SAEAE,UAAAa,iBAAA,QAAA,SAAAC,GACAA,EAAA+B,OAAAtB,UAAAC,SAAA,eAIAW,QAAAC,IAAA,GACAtB,EAAAC,iBACAf,UAAAuB,UAAAG,IAAA,uBALAS,QAAAC,IAAA","file":"main.min.js","sourcesContent":["var headerButton = document.getElementById('header-button');\nvar callbackButton = document.querySelector('.modal-button');\nvar modalContainer = document.querySelector('.modal-form');\nvar modalCloseButton = document.querySelector('.modal-form__close-button');\n\nvar mainForm = document.querySelector('.main-form');\nvar mainName = document.getElementById('main-form-name');\nvar mainTel = mainForm.querySelector('[name=tel]');\nvar mainTextArea = mainForm.querySelector('[name=comment]');\n\nvar modalForm = document.querySelector('.modal-form');\nvar form = modalForm.querySelector('form');\nvar nameFooter = form.querySelector('[name=name-popup]');\nvar tel = form.querySelector('[name=tel]');\nvar textArea = form.querySelector('[name=comment]');\n\nvar footerRollBar = document.querySelectorAll('.roll-bar');\nvar footer = document.querySelector('.footer__wrapper');\nvar footerToggleButton = document.querySelectorAll('.footer__toggle');\n\nvar footerFeedback = document.querySelector('.feedback');\n\nif(headerButton && document.documentElement.clientWidth < 768) {\n  headerButton.textContent = \"бесплатная консультация\";\n};\n\nheaderButton.addEventListener('click', function(evt) {\n  evt.preventDefault();\n  footerFeedback.scrollIntoView({behavior: \"smooth\", block: \"center\", inline: \"center\"});\n})\n\nfooterToggleButton.forEach(function(it) {\n  it.addEventListener('change', function(evt) {\n    evt.preventDefault();\n    footerRollBar.forEach(function(bar) {\n      if(bar.classList.contains('roll-bar--open')) {\n        bar.classList.remove('roll-bar--open');\n        // bar.classList.add('visually-hidden');\n      } else {\n        bar.classList.add('roll-bar--open');\n        // bar.classList.remove('visually-hidden');\n      }\n    })\n  })\n})\n\n// footer.addEventListener('click', function(evt) {\n//   evt.preventDefault();\n\n//   if (evt.target.contains('footer__toggle-label')) {\n//     footerRollBar.forEach(function(it) {\n\n//     })\n//   }\n// })\n\n\n// var siteMap = {\n//   toggleButton: document.getElementById('footer-toggle'),\n//   siteMapList: document.querySelector('.site-map__list'),\n//   siteMapListLabel: document.querySelector('.footer__toggle-label'),\n// }\n\n// var footerAdress = {\n//   toggleButton: document.getElementById('adress-toggle'),\n//   siteMapList: document.querySelector('.footer__adress-description'),\n//   siteMapListLabel: document.querySelector('.adress-toggle-label'),\n// }\n\n// if(headerButton && document.documentElement.clientWidth < 768) {\n//   headerButton.textContent = \"бесплатная консультация\";\n// };\n\n// var onToggleButtonClick = function(toggleButton, siteMapList, siteMapListLabel) {\n//   if (toggleButton.checked) {\n//     siteMapList.style = 'display: block';\n//     siteMapListLabel.style = 'height: 2px; overflow: hidden'\n//   } else {\n//     siteMapList.style = 'display: none';\n//     siteMapListLabel.style = 'height: 17px'\n//   }\n// }\n\n// siteMap.toggleButton.addEventListener('change', function() {\n//   onToggleButtonClick(siteMap.toggleButton, siteMap.siteMapList, siteMap.siteMapListLabel)\n// });\n\n// footerAdress.toggleButton.addEventListener('change', function() {\n//   onToggleButtonClick(footerAdress.toggleButton, footerAdress.siteMapList, footerAdress.siteMapListLabel)\n// });\n\nvar isStorageSupport = true;\nvar isStorageEmail = true;\nvar storage = \"\";\nvar telStorage = \"\";\n\nvar onModalOpen = function (evt) {\n  evt.preventDefault();\n  if (modalForm.classList.contains(\"modal-form--closed\")){\n    modalForm.classList.remove(\"modal-form--closed\");\n\n    if (storage && telStorage) {\n      nameFooter.value = storage;\n      tel.value = emailStorage;\n      textArea.focus();\n    } else if(storage) {\n      nameFooter.value = storage;\n      console.log(name);\n      tel.focus();\n    } else {\n      nameFooter.focus();\n    }\n  }\n};\n\ntry {\n  storage = localStorage.getItem(\"name\");\n} catch (err) {\n  isStorageSupport = false;\n}\n\ntry {\n  emailStorage = localStorage.getItem(\"tel\");\n} catch (err) {\n  isStorageEmail = false;\n}\n\ncallbackButton.addEventListener(\"click\", onModalOpen);\n\nmodalCloseButton.addEventListener('click', function(evt) {\n  evt.preventDefault();\n  modalForm.classList.add(\"modal-form--closed\");\n})\n\nwindow.addEventListener(\"keydown\", function(evt) {\n  if (evt.keyCode === 27) {\n    if (!modalForm.classList.contains(\"modal-form--closed\")) {\n      evt.preventDefault();\n      modalForm.classList.add(\"modal-form--closed\");\n    }\n  }\n});\n\nvar submitForm = function(form, name, tel) {\n  form.addEventListener('submit', function(evt) {\n    if (!name.value || !tel.value) {\n      evt.preventDefault();\n      console.log(\"Нужно ввести имя и телефон\");\n    } else {\n      if(isStorageSupport && isStorageEmail) {\n        localStorage.setItem(\"name\", name.value);\n        localStorage.setItem(\"tel\", tel.value);\n      }\n    }\n  })\n}\n\nsubmitForm(form, name, tel);\nsubmitForm(mainForm, mainName, mainTel);\n\nmodalForm.addEventListener(\"click\", function(evt) {\n  if (!evt.target.classList.contains(\"modal-form\")) {\n    console.log(1);\n    return;\n  }\n  console.log(2);\n  evt.preventDefault();\n  modalForm.classList.add(\"modal-form--closed\");\n});\n"]}